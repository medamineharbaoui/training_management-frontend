<div class="container mt-5" *ngIf="!isLoading">
  <p-toast></p-toast>

  <!-- Add Workshop Button -->
  <div class="mb-3 text-end">
    <button pButton label="Add Workshop" icon="pi pi-plus" class="btn btn-primary" (click)="openDialog()"></button>
  </div>

  <!-- Workshop Table Component -->
  <app-workshop-table
    [workshops]="workshops"
    [trainers]="trainers"
    (edit)="openDialog($event)"
    (delete)="delete($event)">
  </app-workshop-table>


  <!-- Workshop Dialog Form -->
  <p-dialog header="{{ editingWorkshop ? 'Edit Workshop' : 'Add Workshop' }}"
            [(visible)]="dialogVisible"
            [modal]="true"
            [closable]="true"
            [style]="{ width: '70%' }">

    <form [formGroup]="workshopForm" (ngSubmit)="submit()">
      <div class="mb-3">
        <label class="form-label">Title</label>
        <input type="text" pInputText formControlName="title" class="form-control" />
      </div>

      <div class="mb-3">
        <label class="form-label">Description</label>
        <input type="text" pInputText formControlName="description" class="form-control" />
      </div>

      <div class="mb-3">
        <label class="form-label">Date</label>
        <p-datePicker formControlName="date" showIcon class="w-100"></p-datePicker>
      </div>

      <div class="mb-3">
        <label class="form-label">Trainer ID</label>
        <p-select [options]="trainers" formControlName="trainer" placeholder="Select a Trainer" class="w-100 mt-2"></p-select>
      </div>

      <div class="d-flex gap-2 justify-content-end">
        <button pButton type="submit" label="{{ editingWorkshop ? 'Update' : 'Create' }}" class="btn btn-primary"></button>
        <button pButton type="button" label="Cancel" class="btn btn-secondary" (click)="dialogVisible=false"></button>
      </div>
    </form>

  </p-dialog>
</div>
